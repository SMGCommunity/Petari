#include "Game/Util/BezierSurface.hpp"
#include "Game/Util/MathUtil.hpp"
#include <revolution/gx/GXVert.h>
#include <revolution/mtx.h>

namespace {
    // Scaling Coefficients for Control points
    static TrianglePatchCoefs sBezierTriangleCoef0[] = {{1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
                                                        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f},
                                                        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentS0[] = {
        {-1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, -0.0f, -0.0f, -0.0f, 3.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, 0.0f, 0.0f, 0.0f, 3.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentT0[] = {
        {-1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -3.0f, 3.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -3.0f, 3.0f}};

    static TrianglePatchCoefs sBezierTriangleCoef1[] = {{1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
                                                        {0.125f, 0.375f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.125f, 0.0f, 0.0f, 0.0f},
                                                        {0.125f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.125f},
                                                        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f},
                                                        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.125f, 0.375f, 0.375f, 0.125f},
                                                        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentS1[] = {
        {-1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {-0.75f, -0.75f, -0.0f, -0.0f, -0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f},
        {-0.75f, -0.0f, -0.0f, -0.0f, -0.75f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.75f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, -0.0f, -0.0f, -0.0f, 3.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.375f, -1.125f, -1.125f, -0.375f, 0.375f, 1.125f, 1.125f, 0.375f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, 0.0f, 0.0f, 0.0f, 3.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentT1[] = {
        {-1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -1.125f, 1.125f, 0.0f, 0.0f, -1.125f, 1.125f, 0.0f, 0.0f, -0.375f, 0.375f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -1.125f, 1.125f, -0.0f, -0.0f, -1.125f, 1.125f, -0.0f, -0.0f, -0.375f, 0.375f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -3.0f, 3.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.75f, -0.75f, 0.75f, 0.75f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -3.0f, 3.0f}};

    static TrianglePatchCoefs sBezierTriangleCoef2[] = {
        {1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.296296f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.037037f, 0.0f, 0.0f, 0.0f},
        {0.296296f, 0.0f, 0.0f, 0.0f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.037037f},
        {0.037037f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.296296f, 0.0f, 0.0f, 0.0f},
        {0.037037f, 0.027778f, 0.083333f, 0.083333f, 0.027778f, 0.055556f, 0.166667f, 0.166667f, 0.055556f, 0.037037f, 0.111111f, 0.111111f,
         0.037037f},
        {0.037037f, 0.0f, 0.0f, 0.0f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.296296f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.296296f, 0.444444f, 0.222222f, 0.037037f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.037037f, 0.222222f, 0.444444f, 0.296296f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentS2[] = {
        {-1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {-1.333333f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.333333f, 0.0f, 0.0f, 0.0f},
        {-1.333333f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.333333f},
        {-0.333333f, -1.0f, -0.0f, -0.0f, -0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.333333f, 0.0f, 0.0f, 0.0f},
        {-0.333333f, -0.125f, -0.375f, -0.375f, -0.125f, 0.0f, 0.0f, 0.0f, 0.0f, 0.166667f, 0.5f, 0.5f, 0.166667f},
        {-0.333333f, -0.0f, -0.0f, -0.0f, -1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.333333f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, -0.0f, -0.0f, -0.0f, 3.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.888889f, -1.333333f, -0.666667f, -0.111111f, 0.888889f, 1.333333f, 0.666667f, 0.111111f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.111111f, -0.666667f, -1.333333f, -0.888889f, 0.111111f, 0.666667f, 1.333333f, 0.888889f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, 0.0f, 0.0f, 0.0f, 3.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentT2[] = {
        {-1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -1.333333f, 1.333333f, 0.0f, 0.0f, -0.666667f, 0.666667f, 0.0f, 0.0f, -0.111111f, 0.111111f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -1.333333f, 1.333333f, -0.0f, -0.0f, -0.666667f, 0.666667f, -0.0f, -0.0f, -0.111111f, 0.111111f},
        {0.0f, -0.666667f, 0.666667f, 0.0f, 0.0f, -1.333333f, 1.333333f, 0.0f, 0.0f, -0.888889f, 0.888889f, 0.0f, 0.0f},
        {0.0f, -0.166667f, -0.166667f, 0.166667f, 0.166667f, -0.333333f, -0.333333f, 0.333333f, 0.333333f, -0.222222f, -0.222222f, 0.222222f,
         0.222222f},
        {0.0f, -0.0f, -0.0f, -0.666667f, 0.666667f, -0.0f, -0.0f, -1.333333f, 1.333333f, -0.0f, -0.0f, -0.888889f, 0.888889f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -3.0f, 3.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -1.333333f, 0.0f, 1.0f, 0.333333f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.333333f, -1.0f, 0.0f, 1.333333f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -3.0f, 3.0f}};

    static TrianglePatchCoefs sBezierTriangleCoef3[] = {
        {1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.421875f, 0.421875f, 0.0f, 0.0f, 0.0f, 0.140625f, 0.0f, 0.0f, 0.0f, 0.015625f, 0.0f, 0.0f, 0.0f},
        {0.421875f, 0.0f, 0.0f, 0.0f, 0.421875f, 0.0f, 0.0f, 0.0f, 0.140625f, 0.0f, 0.0f, 0.0f, 0.015625f},
        {0.125f, 0.375f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.125f, 0.0f, 0.0f, 0.0f},
        {0.125f, 0.046875f, 0.140625f, 0.140625f, 0.046875f, 0.046875f, 0.140625f, 0.140625f, 0.046875f, 0.015625f, 0.046875f, 0.046875f, 0.015625f},
        {0.125f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.125f},
        {0.015625f, 0.140625f, 0.0f, 0.0f, 0.0f, 0.421875f, 0.0f, 0.0f, 0.0f, 0.421875f, 0.0f, 0.0f, 0.0f},
        {0.015625f, 0.041667f, 0.0625f, 0.03125f, 0.005208f, 0.125f, 0.1875f, 0.09375f, 0.015625f, 0.125f, 0.1875f, 0.09375f, 0.015625f},
        {0.015625f, 0.005208f, 0.03125f, 0.0625f, 0.041667f, 0.015625f, 0.09375f, 0.1875f, 0.125f, 0.015625f, 0.09375f, 0.1875f, 0.125f},
        {0.015625f, 0.0f, 0.0f, 0.0f, 0.140625f, 0.0f, 0.0f, 0.0f, 0.421875f, 0.0f, 0.0f, 0.0f, 0.421875f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.421875f, 0.421875f, 0.140625f, 0.015625f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.125f, 0.375f, 0.375f, 0.125f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.015625f, 0.140625f, 0.421875f, 0.421875f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentS3[] = {
        {-1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {-1.6875f, 0.5625f, 0.0f, 0.0f, 0.0f, 0.9375f, 0.0f, 0.0f, 0.0f, 0.1875f, 0.0f, 0.0f, 0.0f},
        {-1.6875f, 0.0f, 0.0f, 0.0f, 0.5625f, 0.0f, 0.0f, 0.0f, 0.9375f, 0.0f, 0.0f, 0.0f, 0.1875f},
        {-0.75f, -0.75f, -0.0f, -0.0f, -0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f},
        {-0.75f, -0.09375f, -0.28125f, -0.28125f, -0.09375f, 0.09375f, 0.28125f, 0.28125f, 0.09375f, 0.09375f, 0.28125f, 0.28125f, 0.09375f},
        {-0.75f, -0.0f, -0.0f, -0.0f, -0.75f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.75f},
        {-0.1875f, -0.9375f, -0.0f, -0.0f, -0.0f, -0.5625f, -0.0f, -0.0f, -0.0f, 1.6875f, 0.0f, 0.0f, 0.0f},
        {-0.1875f, -0.277778f, -0.416667f, -0.208333f, -0.034722f, -0.166667f, -0.25f, -0.125f, -0.020833f, 0.5f, 0.75f, 0.375f, 0.0625f},
        {-0.1875f, -0.034722f, -0.208333f, -0.416667f, -0.277778f, -0.020833f, -0.125f, -0.25f, -0.166667f, 0.0625f, 0.375f, 0.75f, 0.5f},
        {-0.1875f, -0.0f, -0.0f, -0.0f, -0.9375f, -0.0f, -0.0f, -0.0f, -0.5625f, 0.0f, 0.0f, 0.0f, 1.6875f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, -0.0f, -0.0f, -0.0f, 3.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -1.265625f, -1.265625f, -0.421875f, -0.046875f, 1.265625f, 1.265625f, 0.421875f, 0.046875f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.375f, -1.125f, -1.125f, -0.375f, 0.375f, 1.125f, 1.125f, 0.375f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.046875f, -0.421875f, -1.265625f, -1.265625f, 0.046875f, 0.421875f, 1.265625f, 1.265625f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, 0.0f, 0.0f, 0.0f, 3.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentT3[] = {
        {-1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -1.265625f, 1.265625f, 0.0f, 0.0f, -0.421875f, 0.421875f, 0.0f, 0.0f, -0.046875f, 0.046875f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -1.265625f, 1.265625f, -0.0f, -0.0f, -0.421875f, 0.421875f, -0.0f, -0.0f, -0.046875f, 0.046875f},
        {0.0f, -1.125f, 1.125f, 0.0f, 0.0f, -1.125f, 1.125f, 0.0f, 0.0f, -0.375f, 0.375f, 0.0f, 0.0f},
        {0.0f, -0.28125f, -0.28125f, 0.28125f, 0.28125f, -0.28125f, -0.28125f, 0.28125f, 0.28125f, -0.09375f, -0.09375f, 0.09375f, 0.09375f},
        {0.0f, -0.0f, -0.0f, -1.125f, 1.125f, -0.0f, -0.0f, -1.125f, 1.125f, -0.0f, -0.0f, -0.375f, 0.375f},
        {0.0f, -0.421875f, 0.421875f, 0.0f, 0.0f, -1.265625f, 1.265625f, 0.0f, 0.0f, -1.265625f, 1.265625f, 0.0f, 0.0f},
        {0.0f, -0.1875f, 0.0f, 0.140625f, 0.046875f, -0.5625f, 0.0f, 0.421875f, 0.140625f, -0.5625f, 0.0f, 0.421875f, 0.140625f},
        {0.0f, -0.046875f, -0.140625f, 0.0f, 0.1875f, -0.140625f, -0.421875f, 0.0f, 0.5625f, -0.140625f, -0.421875f, 0.0f, 0.5625f},
        {0.0f, -0.0f, -0.0f, -0.421875f, 0.421875f, -0.0f, -0.0f, -1.265625f, 1.265625f, -0.0f, -0.0f, -1.265625f, 1.265625f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -3.0f, 3.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -1.6875f, 0.5625f, 0.9375f, 0.1875f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.75f, -0.75f, 0.75f, 0.75f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.1875f, -0.9375f, -0.5625f, 1.6875f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -3.0f, 3.0f}};

    static TrianglePatchCoefs sBezierTriangleCoef4[] = {
        {1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.512f, 0.384f, 0.0f, 0.0f, 0.0f, 0.096f, 0.0f, 0.0f, 0.0f, 0.008f, 0.0f, 0.0f, 0.0f},
        {0.512f, 0.0f, 0.0f, 0.0f, 0.384f, 0.0f, 0.0f, 0.0f, 0.096f, 0.0f, 0.0f, 0.0f, 0.008f},
        {0.216f, 0.432f, 0.0f, 0.0f, 0.0f, 0.288f, 0.0f, 0.0f, 0.0f, 0.064f, 0.0f, 0.0f, 0.0f},
        {0.216f, 0.054f, 0.162f, 0.162f, 0.054f, 0.036f, 0.108f, 0.108f, 0.036f, 0.008f, 0.024f, 0.024f, 0.008f},
        {0.216f, 0.0f, 0.0f, 0.0f, 0.432f, 0.0f, 0.0f, 0.0f, 0.288f, 0.0f, 0.0f, 0.0f, 0.064f},
        {0.064f, 0.288f, 0.0f, 0.0f, 0.0f, 0.432f, 0.0f, 0.0f, 0.0f, 0.216f, 0.0f, 0.0f, 0.0f},
        {0.064f, 0.085333f, 0.128f, 0.064f, 0.010667f, 0.128f, 0.192f, 0.096f, 0.016f, 0.064f, 0.096f, 0.048f, 0.008f},
        {0.064f, 0.010667f, 0.064f, 0.128f, 0.085333f, 0.016f, 0.096f, 0.192f, 0.128f, 0.008f, 0.048f, 0.096f, 0.064f},
        {0.064f, 0.0f, 0.0f, 0.0f, 0.288f, 0.0f, 0.0f, 0.0f, 0.432f, 0.0f, 0.0f, 0.0f, 0.216f},
        {0.008f, 0.096f, 0.0f, 0.0f, 0.0f, 0.384f, 0.0f, 0.0f, 0.0f, 0.512f, 0.0f, 0.0f, 0.0f},
        {0.008f, 0.0405f, 0.0405f, 0.0135f, 0.0015f, 0.162f, 0.162f, 0.054f, 0.006f, 0.216f, 0.216f, 0.072f, 0.008f},
        {0.008f, 0.012f, 0.036f, 0.036f, 0.012f, 0.048f, 0.144f, 0.144f, 0.048f, 0.064f, 0.192f, 0.192f, 0.064f},
        {0.008f, 0.0015f, 0.0135f, 0.0405f, 0.0405f, 0.006f, 0.054f, 0.162f, 0.162f, 0.008f, 0.072f, 0.216f, 0.216f},
        {0.008f, 0.0f, 0.0f, 0.0f, 0.096f, 0.0f, 0.0f, 0.0f, 0.384f, 0.0f, 0.0f, 0.0f, 0.512f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.512f, 0.384f, 0.096f, 0.008f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.216f, 0.432f, 0.288f, 0.064f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.064f, 0.288f, 0.432f, 0.216f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.008f, 0.096f, 0.384f, 0.512f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentS4[] = {
        {-1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {-1.92f, 0.96f, 0.0f, 0.0f, 0.0f, 0.84f, 0.0f, 0.0f, 0.0f, 0.12f, 0.0f, 0.0f, 0.0f},
        {-1.92f, 0.0f, 0.0f, 0.0f, 0.96f, 0.0f, 0.0f, 0.0f, 0.84f, 0.0f, 0.0f, 0.0f, 0.12f},
        {-1.08f, -0.36f, -0.0f, -0.0f, -0.0f, 0.96f, 0.0f, 0.0f, 0.0f, 0.48f, 0.0f, 0.0f, 0.0f},
        {-1.08f, -0.045f, -0.135f, -0.135f, -0.045f, 0.12f, 0.36f, 0.36f, 0.12f, 0.06f, 0.18f, 0.18f, 0.06f},
        {-1.08f, -0.0f, -0.0f, -0.0f, -0.36f, 0.0f, 0.0f, 0.0f, 0.96f, 0.0f, 0.0f, 0.0f, 0.48f},
        {-0.48f, -0.96f, -0.0f, -0.0f, -0.0f, 0.36f, 0.0f, 0.0f, 0.0f, 1.08f, 0.0f, 0.0f, 0.0f},
        {-0.48f, -0.284444f, -0.426667f, -0.213333f, -0.035556f, 0.106667f, 0.16f, 0.08f, 0.013333f, 0.32f, 0.48f, 0.24f, 0.04f},
        {-0.48f, -0.035556f, -0.213333f, -0.426667f, -0.284444f, 0.013333f, 0.08f, 0.16f, 0.106667f, 0.04f, 0.24f, 0.48f, 0.32f},
        {-0.48f, -0.0f, -0.0f, -0.0f, -0.96f, 0.0f, 0.0f, 0.0f, 0.36f, 0.0f, 0.0f, 0.0f, 1.08f},
        {-0.12f, -0.84f, -0.0f, -0.0f, -0.0f, -0.96f, -0.0f, -0.0f, -0.0f, 1.92f, 0.0f, 0.0f, 0.0f},
        {-0.12f, -0.354375f, -0.354375f, -0.118125f, -0.013125f, -0.405f, -0.405f, -0.135f, -0.015f, 0.81f, 0.81f, 0.27f, 0.03f},
        {-0.12f, -0.105f, -0.315f, -0.315f, -0.105f, -0.12f, -0.36f, -0.36f, -0.12f, 0.24f, 0.72f, 0.72f, 0.24f},
        {-0.12f, -0.013125f, -0.118125f, -0.354375f, -0.354375f, -0.015f, -0.135f, -0.405f, -0.405f, 0.03f, 0.27f, 0.81f, 0.81f},
        {-0.12f, -0.0f, -0.0f, -0.0f, -0.84f, -0.0f, -0.0f, -0.0f, -0.96f, 0.0f, 0.0f, 0.0f, 1.92f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, -0.0f, -0.0f, -0.0f, 3.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -1.536f, -1.152f, -0.288f, -0.024f, 1.536f, 1.152f, 0.288f, 0.024f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.648f, -1.296f, -0.864f, -0.192f, 0.648f, 1.296f, 0.864f, 0.192f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.192f, -0.864f, -1.296f, -0.648f, 0.192f, 0.864f, 1.296f, 0.648f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.024f, -0.288f, -1.152f, -1.536f, 0.024f, 0.288f, 1.152f, 1.536f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, 0.0f, 0.0f, 0.0f, 3.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentT4[] = {
        {-1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -1.152f, 1.152f, 0.0f, 0.0f, -0.288f, 0.288f, 0.0f, 0.0f, -0.024f, 0.024f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -1.152f, 1.152f, -0.0f, -0.0f, -0.288f, 0.288f, -0.0f, -0.0f, -0.024f, 0.024f},
        {0.0f, -1.296f, 1.296f, 0.0f, 0.0f, -0.864f, 0.864f, 0.0f, 0.0f, -0.192f, 0.192f, 0.0f, 0.0f},
        {0.0f, -0.324f, -0.324f, 0.324f, 0.324f, -0.216f, -0.216f, 0.216f, 0.216f, -0.048f, -0.048f, 0.048f, 0.048f},
        {0.0f, -0.0f, -0.0f, -1.296f, 1.296f, -0.0f, -0.0f, -0.864f, 0.864f, -0.0f, -0.0f, -0.192f, 0.192f},
        {0.0f, -0.864f, 0.864f, 0.0f, 0.0f, -1.296f, 1.296f, 0.0f, 0.0f, -0.648f, 0.648f, 0.0f, 0.0f},
        {0.0f, -0.384f, 0.0f, 0.288f, 0.096f, -0.576f, 0.0f, 0.432f, 0.144f, -0.288f, 0.0f, 0.216f, 0.072f},
        {0.0f, -0.096f, -0.288f, 0.0f, 0.384f, -0.144f, -0.432f, 0.0f, 0.576f, -0.072f, -0.216f, 0.0f, 0.288f},
        {0.0f, -0.0f, -0.0f, -0.864f, 0.864f, -0.0f, -0.0f, -1.296f, 1.296f, -0.0f, -0.0f, -0.648f, 0.648f},
        {0.0f, -0.288f, 0.288f, 0.0f, 0.0f, -1.152f, 1.152f, 0.0f, 0.0f, -1.536f, 1.536f, 0.0f, 0.0f},
        {0.0f, -0.162f, 0.054f, 0.09f, 0.018f, -0.648f, 0.216f, 0.36f, 0.072f, -0.864f, 0.288f, 0.48f, 0.096f},
        {0.0f, -0.072f, -0.072f, 0.072f, 0.072f, -0.288f, -0.288f, 0.288f, 0.288f, -0.384f, -0.384f, 0.384f, 0.384f},
        {0.0f, -0.018f, -0.09f, -0.054f, 0.162f, -0.072f, -0.36f, -0.216f, 0.648f, -0.096f, -0.48f, -0.288f, 0.864f},
        {0.0f, -0.0f, -0.0f, -0.288f, 0.288f, -0.0f, -0.0f, -1.152f, 1.152f, -0.0f, -0.0f, -1.536f, 1.536f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -3.0f, 3.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -1.92f, 0.96f, 0.84f, 0.12f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -1.08f, -0.36f, 0.96f, 0.48f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.48f, -0.96f, 0.36f, 1.08f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.12f, -0.84f, -0.96f, 1.92f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -3.0f, 3.0f}};

    static TrianglePatchCoefs sBezierTriangleCoef5[] = {
        {1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.578704f, 0.347222f, 0.0f, 0.0f, 0.0f, 0.069444f, 0.0f, 0.0f, 0.0f, 0.00463f, 0.0f, 0.0f, 0.0f},
        {0.578704f, 0.0f, 0.0f, 0.0f, 0.347222f, 0.0f, 0.0f, 0.0f, 0.069444f, 0.0f, 0.0f, 0.0f, 0.00463f},
        {0.296296f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.037037f, 0.0f, 0.0f, 0.0f},
        {0.296296f, 0.055556f, 0.166667f, 0.166667f, 0.055556f, 0.027778f, 0.083333f, 0.083333f, 0.027778f, 0.00463f, 0.013889f, 0.013889f, 0.00463f},
        {0.296296f, 0.0f, 0.0f, 0.0f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.037037f},
        {0.125f, 0.375f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.125f, 0.0f, 0.0f, 0.0f},
        {0.125f, 0.111111f, 0.166667f, 0.083333f, 0.013889f, 0.111111f, 0.166667f, 0.083333f, 0.013889f, 0.037037f, 0.055556f, 0.027778f, 0.00463f},
        {0.125f, 0.013889f, 0.083333f, 0.166667f, 0.111111f, 0.013889f, 0.083333f, 0.166667f, 0.111111f, 0.00463f, 0.027778f, 0.055556f, 0.037037f},
        {0.125f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.375f, 0.0f, 0.0f, 0.0f, 0.125f},
        {0.037037f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.296296f, 0.0f, 0.0f, 0.0f},
        {0.037037f, 0.09375f, 0.09375f, 0.03125f, 0.003472f, 0.1875f, 0.1875f, 0.0625f, 0.006944f, 0.125f, 0.125f, 0.041667f, 0.00463f},
        {0.037037f, 0.027778f, 0.083333f, 0.083333f, 0.027778f, 0.055556f, 0.166667f, 0.166667f, 0.055556f, 0.037037f, 0.111111f, 0.111111f,
         0.037037f},
        {0.037037f, 0.003472f, 0.03125f, 0.09375f, 0.09375f, 0.006944f, 0.0625f, 0.1875f, 0.1875f, 0.00463f, 0.041667f, 0.125f, 0.125f},
        {0.037037f, 0.0f, 0.0f, 0.0f, 0.222222f, 0.0f, 0.0f, 0.0f, 0.444444f, 0.0f, 0.0f, 0.0f, 0.296296f},
        {0.00463f, 0.069444f, 0.0f, 0.0f, 0.0f, 0.347222f, 0.0f, 0.0f, 0.0f, 0.578704f, 0.0f, 0.0f, 0.0f},
        {0.00463f, 0.035556f, 0.026667f, 0.006667f, 0.000556f, 0.177778f, 0.133333f, 0.033333f, 0.002778f, 0.296296f, 0.222222f, 0.055556f, 0.00463f},
        {0.00463f, 0.015f, 0.03f, 0.02f, 0.004444f, 0.075f, 0.15f, 0.1f, 0.022222f, 0.125f, 0.25f, 0.166667f, 0.037037f},
        {0.00463f, 0.004444f, 0.02f, 0.03f, 0.015f, 0.022222f, 0.1f, 0.15f, 0.075f, 0.037037f, 0.166667f, 0.25f, 0.125f},
        {0.00463f, 0.000556f, 0.006667f, 0.026667f, 0.035556f, 0.002778f, 0.033333f, 0.133333f, 0.177778f, 0.00463f, 0.055556f, 0.222222f, 0.296296f},
        {0.00463f, 0.0f, 0.0f, 0.0f, 0.069444f, 0.0f, 0.0f, 0.0f, 0.347222f, 0.0f, 0.0f, 0.0f, 0.578704f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.578704f, 0.347222f, 0.069444f, 0.00463f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.296296f, 0.444444f, 0.222222f, 0.037037f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.125f, 0.375f, 0.375f, 0.125f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.037037f, 0.222222f, 0.444444f, 0.296296f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.00463f, 0.069444f, 0.347222f, 0.578704f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentS5[] = {
        {-1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {-2.083333f, 1.25f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.083333f, 0.0f, 0.0f, 0.0f},
        {-2.083333f, 0.0f, 0.0f, 0.0f, 1.25f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.083333f},
        {-1.333333f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.333333f, 0.0f, 0.0f, 0.0f},
        {-1.333333f, 0.0f, 0.0f, 0.0f, 0.0f, 0.125f, 0.375f, 0.375f, 0.125f, 0.041667f, 0.125f, 0.125f, 0.041667f},
        {-1.333333f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.333333f},
        {-0.75f, -0.75f, -0.0f, -0.0f, -0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f},
        {-0.75f, -0.222222f, -0.333333f, -0.166667f, -0.027778f, 0.222222f, 0.333333f, 0.166667f, 0.027778f, 0.222222f, 0.333333f, 0.166667f,
         0.027778f},
        {-0.75f, -0.027778f, -0.166667f, -0.333333f, -0.222222f, 0.027778f, 0.166667f, 0.333333f, 0.222222f, 0.027778f, 0.166667f, 0.333333f,
         0.222222f},
        {-0.75f, -0.0f, -0.0f, -0.0f, -0.75f, 0.0f, 0.0f, 0.0f, 0.75f, 0.0f, 0.0f, 0.0f, 0.75f},
        {-0.333333f, -1.0f, -0.0f, -0.0f, -0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.333333f, 0.0f, 0.0f, 0.0f},
        {-0.333333f, -0.421875f, -0.421875f, -0.140625f, -0.015625f, 0.0f, 0.0f, 0.0f, 0.0f, 0.5625f, 0.5625f, 0.1875f, 0.020833f},
        {-0.333333f, -0.125f, -0.375f, -0.375f, -0.125f, 0.0f, 0.0f, 0.0f, 0.0f, 0.166667f, 0.5f, 0.5f, 0.166667f},
        {-0.333333f, -0.015625f, -0.140625f, -0.421875f, -0.421875f, 0.0f, 0.0f, 0.0f, 0.0f, 0.020833f, 0.1875f, 0.5625f, 0.5625f},
        {-0.333333f, -0.0f, -0.0f, -0.0f, -1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.333333f},
        {-0.083333f, -0.75f, -0.0f, -0.0f, -0.0f, -1.25f, -0.0f, -0.0f, -0.0f, 2.083333f, 0.0f, 0.0f, 0.0f},
        {-0.083333f, -0.384f, -0.288f, -0.072f, -0.006f, -0.64f, -0.48f, -0.12f, -0.01f, 1.066667f, 0.8f, 0.2f, 0.016667f},
        {-0.083333f, -0.162f, -0.324f, -0.216f, -0.048f, -0.27f, -0.54f, -0.36f, -0.08f, 0.45f, 0.9f, 0.6f, 0.133333f},
        {-0.083333f, -0.048f, -0.216f, -0.324f, -0.162f, -0.08f, -0.36f, -0.54f, -0.27f, 0.133333f, 0.6f, 0.9f, 0.45f},
        {-0.083333f, -0.006f, -0.072f, -0.288f, -0.384f, -0.01f, -0.12f, -0.48f, -0.64f, 0.016667f, 0.2f, 0.8f, 1.066667f},
        {-0.083333f, -0.0f, -0.0f, -0.0f, -0.75f, -0.0f, -0.0f, -0.0f, -1.25f, 0.0f, 0.0f, 0.0f, 2.083333f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, -0.0f, -0.0f, -0.0f, 3.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -1.736111f, -1.041667f, -0.208333f, -0.013889f, 1.736111f, 1.041667f, 0.208333f, 0.013889f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.888889f, -1.333333f, -0.666667f, -0.111111f, 0.888889f, 1.333333f, 0.666667f, 0.111111f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.375f, -1.125f, -1.125f, -0.375f, 0.375f, 1.125f, 1.125f, 0.375f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.111111f, -0.666667f, -1.333333f, -0.888889f, 0.111111f, 0.666667f, 1.333333f, 0.888889f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.013889f, -0.208333f, -1.041667f, -1.736111f, 0.013889f, 0.208333f, 1.041667f, 1.736111f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, 0.0f, 0.0f, 0.0f, 3.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentT5[] = {
        {-1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -1.041667f, 1.041667f, 0.0f, 0.0f, -0.208333f, 0.208333f, 0.0f, 0.0f, -0.013889f, 0.013889f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -1.041667f, 1.041667f, -0.0f, -0.0f, -0.208333f, 0.208333f, -0.0f, -0.0f, -0.013889f, 0.013889f},
        {0.0f, -1.333333f, 1.333333f, 0.0f, 0.0f, -0.666667f, 0.666667f, 0.0f, 0.0f, -0.111111f, 0.111111f, 0.0f, 0.0f},
        {0.0f, -0.333333f, -0.333333f, 0.333333f, 0.333333f, -0.166667f, -0.166667f, 0.166667f, 0.166667f, -0.027778f, -0.027778f, 0.027778f,
         0.027778f},
        {0.0f, -0.0f, -0.0f, -1.333333f, 1.333333f, -0.0f, -0.0f, -0.666667f, 0.666667f, -0.0f, -0.0f, -0.111111f, 0.111111f},
        {0.0f, -1.125f, 1.125f, 0.0f, 0.0f, -1.125f, 1.125f, 0.0f, 0.0f, -0.375f, 0.375f, 0.0f, 0.0f},
        {0.0f, -0.5f, 0.0f, 0.375f, 0.125f, -0.5f, 0.0f, 0.375f, 0.125f, -0.166667f, 0.0f, 0.125f, 0.041667f},
        {0.0f, -0.125f, -0.375f, 0.0f, 0.5f, -0.125f, -0.375f, 0.0f, 0.5f, -0.041667f, -0.125f, 0.0f, 0.166667f},
        {0.0f, -0.0f, -0.0f, -1.125f, 1.125f, -0.0f, -0.0f, -1.125f, 1.125f, -0.0f, -0.0f, -0.375f, 0.375f},
        {0.0f, -0.666667f, 0.666667f, 0.0f, 0.0f, -1.333333f, 1.333333f, 0.0f, 0.0f, -0.888889f, 0.888889f, 0.0f, 0.0f},
        {-0.0f, -0.375f, 0.125f, 0.208333f, 0.041667f, -0.75f, 0.25f, 0.416667f, 0.083333f, -0.5f, 0.166667f, 0.277778f, 0.055556f},
        {0.0f, -0.166667f, -0.166667f, 0.166667f, 0.166667f, -0.333333f, -0.333333f, 0.333333f, 0.333333f, -0.222222f, -0.222222f, 0.222222f,
         0.222222f},
        {0.0f, -0.041667f, -0.208333f, -0.125f, 0.375f, -0.083333f, -0.416667f, -0.25f, 0.75f, -0.055556f, -0.277778f, -0.166667f, 0.5f},
        {0.0f, -0.0f, -0.0f, -0.666667f, 0.666667f, -0.0f, -0.0f, -1.333333f, 1.333333f, -0.0f, -0.0f, -0.888889f, 0.888889f},
        {0.0f, -0.208333f, 0.208333f, 0.0f, 0.0f, -1.041667f, 1.041667f, 0.0f, 0.0f, -1.736111f, 1.736111f, 0.0f, 0.0f},
        {-0.0f, -0.133333f, 0.066667f, 0.058333f, 0.008333f, -0.666667f, 0.333333f, 0.291667f, 0.041667f, -1.111111f, 0.555555f, 0.486111f,
         0.069444f},
        {-0.0f, -0.075f, -0.025f, 0.066667f, 0.033333f, -0.375f, -0.125f, 0.333333f, 0.166667f, -0.625f, -0.208333f, 0.555555f, 0.277778f},
        {0.0f, -0.033333f, -0.066667f, 0.025f, 0.075f, -0.166667f, -0.333333f, 0.125f, 0.375f, -0.277778f, -0.555556f, 0.208333f, 0.625f},
        {-0.0f, -0.008333f, -0.058333f, -0.066667f, 0.133333f, -0.041667f, -0.291667f, -0.333333f, 0.666667f, -0.069444f, -0.486111f, -0.555556f,
         1.111111f},
        {0.0f, -0.0f, -0.0f, -0.208333f, 0.208333f, -0.0f, -0.0f, -1.041667f, 1.041667f, -0.0f, -0.0f, -1.736111f, 1.736111f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -3.0f, 3.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -2.083333f, 1.25f, 0.75f, 0.083333f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -1.333333f, 0.0f, 1.0f, 0.333333f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.75f, -0.75f, 0.75f, 0.75f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.333333f, -1.0f, 0.0f, 1.333333f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.083333f, -0.75f, -1.25f, 2.083333f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -3.0f, 3.0f}};

    static TrianglePatchCoefs sBezierTriangleCoef6[] = {
        {1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.629738f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.052478f, 0.0f, 0.0f, 0.0f, 0.002915f, 0.0f, 0.0f, 0.0f},
        {0.629738f, 0.0f, 0.0f, 0.0f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.052478f, 0.0f, 0.0f, 0.0f, 0.002915f},
        {0.364432f, 0.437318f, 0.0f, 0.0f, 0.0f, 0.174927f, 0.0f, 0.0f, 0.0f, 0.023324f, 0.0f, 0.0f, 0.0f},
        {0.364432f, 0.054665f, 0.163994f, 0.163994f, 0.054665f, 0.021866f, 0.065598f, 0.065598f, 0.021866f, 0.002915f, 0.008746f, 0.008746f,
         0.002915f},
        {0.364432f, 0.0f, 0.0f, 0.0f, 0.437318f, 0.0f, 0.0f, 0.0f, 0.174927f, 0.0f, 0.0f, 0.0f, 0.023324f},
        {0.186589f, 0.419825f, 0.0f, 0.0f, 0.0f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.078717f, 0.0f, 0.0f, 0.0f},
        {0.186589f, 0.124393f, 0.186589f, 0.093294f, 0.015549f, 0.093294f, 0.139942f, 0.069971f, 0.011662f, 0.023324f, 0.034985f, 0.017493f,
         0.002915f},
        {0.186589f, 0.015549f, 0.093294f, 0.186589f, 0.124393f, 0.011662f, 0.069971f, 0.139942f, 0.093294f, 0.002915f, 0.017493f, 0.034985f,
         0.023324f},
        {0.186589f, 0.0f, 0.0f, 0.0f, 0.419825f, 0.0f, 0.0f, 0.0f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.078717f},
        {0.078717f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.419825f, 0.0f, 0.0f, 0.0f, 0.186589f, 0.0f, 0.0f, 0.0f},
        {0.078717f, 0.132835f, 0.132835f, 0.044278f, 0.00492f, 0.177114f, 0.177114f, 0.059038f, 0.00656f, 0.078717f, 0.078717f, 0.026239f, 0.002915f},
        {0.078717f, 0.039359f, 0.118076f, 0.118076f, 0.039359f, 0.052478f, 0.157434f, 0.157434f, 0.052478f, 0.023324f, 0.069971f, 0.069971f,
         0.023324f},
        {0.078717f, 0.00492f, 0.044278f, 0.132835f, 0.132835f, 0.00656f, 0.059038f, 0.177114f, 0.177114f, 0.002915f, 0.026239f, 0.078717f, 0.078717f},
        {0.078717f, 0.0f, 0.0f, 0.0f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.419825f, 0.0f, 0.0f, 0.0f, 0.186589f},
        {0.023324f, 0.174927f, 0.0f, 0.0f, 0.0f, 0.437318f, 0.0f, 0.0f, 0.0f, 0.364432f, 0.0f, 0.0f, 0.0f},
        {0.023324f, 0.089563f, 0.067172f, 0.016793f, 0.001399f, 0.223907f, 0.16793f, 0.041983f, 0.003499f, 0.186589f, 0.139942f, 0.034985f,
         0.002915f},
        {0.023324f, 0.037784f, 0.075569f, 0.050379f, 0.011195f, 0.094461f, 0.188921f, 0.125948f, 0.027988f, 0.078717f, 0.157434f, 0.104956f,
         0.023324f},
        {0.023324f, 0.011195f, 0.050379f, 0.075568f, 0.037784f, 0.027988f, 0.125947f, 0.188921f, 0.094461f, 0.023324f, 0.104956f, 0.157434f,
         0.078717f},
        {0.023324f, 0.001399f, 0.016793f, 0.067172f, 0.089563f, 0.003499f, 0.041983f, 0.16793f, 0.223907f, 0.002915f, 0.034985f, 0.139942f,
         0.186589f},
        {0.023324f, 0.0f, 0.0f, 0.0f, 0.174927f, 0.0f, 0.0f, 0.0f, 0.437318f, 0.0f, 0.0f, 0.0f, 0.364432f},
        {0.002915f, 0.052478f, 0.0f, 0.0f, 0.0f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.629738f, 0.0f, 0.0f, 0.0f},
        {0.002915f, 0.030369f, 0.018222f, 0.003644f, 0.000243f, 0.182216f, 0.109329f, 0.021866f, 0.001458f, 0.364431f, 0.218659f, 0.043732f,
         0.002915f},
        {0.002915f, 0.015549f, 0.023324f, 0.011662f, 0.001944f, 0.093294f, 0.139942f, 0.069971f, 0.011662f, 0.186589f, 0.279883f, 0.139942f,
         0.023324f},
        {0.002915f, 0.00656f, 0.019679f, 0.019679f, 0.00656f, 0.039359f, 0.118076f, 0.118076f, 0.039359f, 0.078717f, 0.236152f, 0.236152f, 0.078717f},
        {0.002915f, 0.001944f, 0.011662f, 0.023324f, 0.015549f, 0.011662f, 0.069971f, 0.139942f, 0.093294f, 0.023324f, 0.139942f, 0.279883f,
         0.186589f},
        {0.002915f, 0.000243f, 0.003644f, 0.018222f, 0.030369f, 0.001458f, 0.021866f, 0.109329f, 0.182216f, 0.002915f, 0.043732f, 0.218659f,
         0.364431f},
        {0.002915f, 0.0f, 0.0f, 0.0f, 0.052478f, 0.0f, 0.0f, 0.0f, 0.314869f, 0.0f, 0.0f, 0.0f, 0.629738f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.629738f, 0.314869f, 0.052478f, 0.002915f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.364432f, 0.437318f, 0.174927f, 0.023324f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.186589f, 0.419825f, 0.314869f, 0.078717f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.078717f, 0.314869f, 0.419825f, 0.186589f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.023324f, 0.174927f, 0.437318f, 0.364432f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.002915f, 0.052478f, 0.314869f, 0.629738f},
        {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentS6[] = {
        {-1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {-2.204082f, 1.469388f, 0.0f, 0.0f, 0.0f, 0.673469f, 0.0f, 0.0f, 0.0f, 0.061224f, 0.0f, 0.0f, 0.0f},
        {-2.204082f, 0.0f, 0.0f, 0.0f, 1.469388f, 0.0f, 0.0f, 0.0f, 0.673469f, 0.0f, 0.0f, 0.0f, 0.061224f},
        {-1.530612f, 0.306122f, 0.0f, 0.0f, 0.0f, 0.979592f, 0.0f, 0.0f, 0.0f, 0.244898f, 0.0f, 0.0f, 0.0f},
        {-1.530612f, 0.038265f, 0.114796f, 0.114796f, 0.038265f, 0.122449f, 0.367347f, 0.367347f, 0.122449f, 0.030612f, 0.091837f, 0.091837f,
         0.030612f},
        {-1.530612f, 0.0f, 0.0f, 0.0f, 0.306122f, 0.0f, 0.0f, 0.0f, 0.979592f, 0.0f, 0.0f, 0.0f, 0.244898f},
        {-0.979592f, -0.489796f, -0.0f, -0.0f, -0.0f, 0.918367f, 0.0f, 0.0f, 0.0f, 0.55102f, 0.0f, 0.0f, 0.0f},
        {-0.979592f, -0.145125f, -0.217687f, -0.108844f, -0.018141f, 0.272109f, 0.408163f, 0.204082f, 0.034014f, 0.163265f, 0.244898f, 0.122449f,
         0.020408f},
        {-0.979592f, -0.018141f, -0.108844f, -0.217687f, -0.145125f, 0.034014f, 0.204082f, 0.408163f, 0.272109f, 0.020408f, 0.122449f, 0.244898f,
         0.163265f},
        {-0.979592f, -0.0f, -0.0f, -0.0f, -0.489796f, 0.0f, 0.0f, 0.0f, 0.918367f, 0.0f, 0.0f, 0.0f, 0.55102f},
        {-0.55102f, -0.918367f, -0.0f, -0.0f, -0.0f, 0.489796f, 0.0f, 0.0f, 0.0f, 0.979592f, 0.0f, 0.0f, 0.0f},
        {-0.55102f, -0.387436f, -0.387436f, -0.129145f, -0.014349f, 0.206633f, 0.206633f, 0.068878f, 0.007653f, 0.413265f, 0.413265f, 0.137755f,
         0.015306f},
        {-0.55102f, -0.114796f, -0.344388f, -0.344388f, -0.114796f, 0.061224f, 0.183673f, 0.183673f, 0.061224f, 0.122449f, 0.367347f, 0.367347f,
         0.122449f},
        {-0.55102f, -0.014349f, -0.129145f, -0.387436f, -0.387436f, 0.007653f, 0.068878f, 0.206633f, 0.206633f, 0.015306f, 0.137755f, 0.413265f,
         0.413265f},
        {-0.55102f, -0.0f, -0.0f, -0.0f, -0.918367f, 0.0f, 0.0f, 0.0f, 0.489796f, 0.0f, 0.0f, 0.0f, 0.979592f},
        {-0.244898f, -0.979592f, -0.0f, -0.0f, -0.0f, -0.306122f, -0.0f, -0.0f, -0.0f, 1.530612f, 0.0f, 0.0f, 0.0f},
        {-0.244898f, -0.501551f, -0.376163f, -0.094041f, -0.007837f, -0.156735f, -0.117551f, -0.029388f, -0.002449f, 0.783674f, 0.587755f, 0.146939f,
         0.012245f},
        {-0.244898f, -0.211592f, -0.423184f, -0.282122f, -0.062694f, -0.066122f, -0.132245f, -0.088163f, -0.019592f, 0.330612f, 0.661225f, 0.440816f,
         0.097959f},
        {-0.244898f, -0.062694f, -0.282122f, -0.423184f, -0.211592f, -0.019592f, -0.088163f, -0.132245f, -0.066122f, 0.097959f, 0.440816f, 0.661224f,
         0.330612f},
        {-0.244898f, -0.007837f, -0.094041f, -0.376163f, -0.501551f, -0.002449f, -0.029388f, -0.117551f, -0.156735f, 0.012245f, 0.146939f, 0.587755f,
         0.783674f},
        {-0.244898f, -0.0f, -0.0f, -0.0f, -0.979592f, -0.0f, -0.0f, -0.0f, -0.306122f, 0.0f, 0.0f, 0.0f, 1.530612f},
        {-0.061224f, -0.673469f, -0.0f, -0.0f, -0.0f, -1.469388f, -0.0f, -0.0f, -0.0f, 2.204082f, 0.0f, 0.0f, 0.0f},
        {-0.061224f, -0.389739f, -0.233844f, -0.046769f, -0.003118f, -0.85034f, -0.510204f, -0.102041f, -0.006803f, 1.27551f, 0.765306f, 0.153061f,
         0.010204f},
        {-0.061224f, -0.199546f, -0.29932f, -0.14966f, -0.024943f, -0.435374f, -0.653061f, -0.326531f, -0.054422f, 0.653061f, 0.979592f, 0.489796f,
         0.081633f},
        {-0.061224f, -0.084184f, -0.252551f, -0.252551f, -0.084184f, -0.183673f, -0.55102f, -0.55102f, -0.183673f, 0.27551f, 0.826531f, 0.826531f,
         0.27551f},
        {-0.061224f, -0.024943f, -0.14966f, -0.29932f, -0.199546f, -0.054422f, -0.326531f, -0.653061f, -0.435374f, 0.081633f, 0.489796f, 0.979592f,
         0.653061f},
        {-0.061224f, -0.003118f, -0.046769f, -0.233844f, -0.389739f, -0.006803f, -0.102041f, -0.510204f, -0.85034f, 0.010204f, 0.153061f, 0.765306f,
         1.27551f},
        {-0.061224f, -0.0f, -0.0f, -0.0f, -0.673469f, -0.0f, -0.0f, -0.0f, -1.469388f, 0.0f, 0.0f, 0.0f, 2.204082f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, -0.0f, -0.0f, -0.0f, 3.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -1.889213f, -0.944607f, -0.157434f, -0.008746f, 1.889213f, 0.944607f, 0.157434f, 0.008746f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -1.093295f, -1.311954f, -0.524781f, -0.069971f, 1.093295f, 1.311954f, 0.524781f, 0.069971f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.559767f, -1.259475f, -0.944606f, -0.236152f, 0.559767f, 1.259475f, 0.944606f, 0.236152f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.236152f, -0.944606f, -1.259475f, -0.559767f, 0.236152f, 0.944606f, 1.259475f, 0.559767f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.069971f, -0.524781f, -1.311953f, -1.093295f, 0.069971f, 0.524781f, 1.311953f, 1.093295f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.008746f, -0.157434f, -0.944606f, -1.889213f, 0.008746f, 0.157434f, 0.944606f, 1.889213f},
        {0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -0.0f, -3.0f, 0.0f, 0.0f, 0.0f, 3.0f}};
    static TrianglePatchCoefs sBezierTriangleCoefTangentT6[] = {
        {-1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f},
        {0.0f, -0.944607f, 0.944607f, 0.0f, 0.0f, -0.157434f, 0.157434f, 0.0f, 0.0f, -0.008746f, 0.008746f, 0.0f, 0.0f},
        {0.0f, -0.0f, -0.0f, -0.944607f, 0.944607f, -0.0f, -0.0f, -0.157434f, 0.157434f, -0.0f, -0.0f, -0.008746f, 0.008746f},
        {0.0f, -1.311954f, 1.311954f, 0.0f, 0.0f, -0.524781f, 0.524781f, 0.0f, 0.0f, -0.069971f, 0.069971f, 0.0f, 0.0f},
        {0.0f, -0.327988f, -0.327988f, 0.327988f, 0.327988f, -0.131195f, -0.131195f, 0.131195f, 0.131195f, -0.017493f, -0.017493f, 0.017493f,
         0.017493f},
        {0.0f, -0.0f, -0.0f, -1.311954f, 1.311954f, -0.0f, -0.0f, -0.524781f, 0.524781f, -0.0f, -0.0f, -0.069971f, 0.069971f},
        {0.0f, -1.259475f, 1.259475f, 0.0f, 0.0f, -0.944606f, 0.944606f, 0.0f, 0.0f, -0.236152f, 0.236152f, 0.0f, 0.0f},
        {0.0f, -0.559767f, 0.0f, 0.419825f, 0.139942f, -0.419825f, 0.0f, 0.314869f, 0.104956f, -0.104956f, 0.0f, 0.078717f, 0.026239f},
        {0.0f, -0.139942f, -0.419825f, 0.0f, 0.559767f, -0.104956f, -0.314869f, 0.0f, 0.419825f, -0.026239f, -0.078717f, 0.0f, 0.104956f},
        {0.0f, -0.0f, -0.0f, -1.259475f, 1.259475f, -0.0f, -0.0f, -0.944606f, 0.944606f, -0.0f, -0.0f, -0.236152f, 0.236152f},
        {0.0f, -0.944606f, 0.944606f, 0.0f, 0.0f, -1.259475f, 1.259475f, 0.0f, 0.0f, -0.559767f, 0.559767f, 0.0f, 0.0f},
        {-0.0f, -0.531341f, 0.177114f, 0.295189f, 0.059038f, -0.708455f, 0.236152f, 0.393586f, 0.078717f, -0.314869f, 0.104956f, 0.174927f,
         0.034985f},
        {0.0f, -0.236152f, -0.236152f, 0.236152f, 0.236152f, -0.314869f, -0.314869f, 0.314869f, 0.314869f, -0.139942f, -0.139942f, 0.139942f,
         0.139942f},
        {0.0f, -0.059038f, -0.295189f, -0.177114f, 0.531341f, -0.078717f, -0.393586f, -0.236152f, 0.708455f, -0.034985f, -0.174927f, -0.104956f,
         0.314869f},
        {0.0f, -0.0f, -0.0f, -0.944606f, 0.944606f, -0.0f, -0.0f, -1.259475f, 1.259475f, -0.0f, -0.0f, -0.559767f, 0.559767f},
        {0.0f, -0.524781f, 0.524781f, 0.0f, 0.0f, -1.311953f, 1.311953f, 0.0f, 0.0f, -1.093295f, 1.093295f, 0.0f, 0.0f},
        {-0.0f, -0.33586f, 0.16793f, 0.146939f, 0.020991f, -0.83965f, 0.419825f, 0.367347f, 0.052478f, -0.699709f, 0.349854f, 0.306122f, 0.043732f},
        {-0.0f, -0.188921f, -0.062974f, 0.16793f, 0.083965f, -0.472303f, -0.157434f, 0.419825f, 0.209913f, -0.393586f, -0.131195f, 0.349854f,
         0.174927f},
        {-0.0f, -0.083965f, -0.16793f, 0.062974f, 0.188921f, -0.209912f, -0.419825f, 0.157434f, 0.472303f, -0.174927f, -0.349854f, 0.131195f,
         0.393586f},
        {-0.0f, -0.020991f, -0.146939f, -0.16793f, 0.33586f, -0.052478f, -0.367347f, -0.419825f, 0.83965f, -0.043732f, -0.306122f, -0.349854f,
         0.699709f},
        {0.0f, -0.0f, -0.0f, -0.524781f, 0.524781f, -0.0f, -0.0f, -1.311953f, 1.311953f, -0.0f, -0.0f, -1.093295f, 1.093295f},
        {0.0f, -0.157434f, 0.157434f, 0.0f, 0.0f, -0.944606f, 0.944606f, 0.0f, 0.0f, -1.889213f, 1.889213f, 0.0f, 0.0f},
        {0.0f, -0.109329f, 0.065598f, 0.039359f, 0.004373f, -0.655977f, 0.393586f, 0.236152f, 0.026239f, -1.311953f, 0.787172f, 0.472303f, 0.052478f},
        {0.0f, -0.069971f, 0.0f, 0.052478f, 0.017493f, -0.419825f, 0.0f, 0.314869f, 0.104956f, -0.83965f, 0.0f, 0.629738f, 0.209913f},
        {0.0f, -0.039359f, -0.039359f, 0.039359f, 0.039359f, -0.236152f, -0.236152f, 0.236152f, 0.236152f, -0.472303f, -0.472303f, 0.472303f,
         0.472303f},
        {0.0f, -0.017493f, -0.052478f, 0.0f, 0.069971f, -0.104956f, -0.314869f, 0.0f, 0.419825f, -0.209913f, -0.629738f, 0.0f, 0.83965f},
        {-0.0f, -0.004373f, -0.039359f, -0.065598f, 0.109329f, -0.026239f, -0.236152f, -0.393586f, 0.655977f, -0.052478f, -0.472303f, -0.787172f,
         1.311953f},
        {0.0f, -0.0f, -0.0f, -0.157434f, 0.157434f, -0.0f, -0.0f, -0.944606f, 0.944606f, -0.0f, -0.0f, -1.889213f, 1.889213f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -3.0f, 3.0f, 0.0f, 0.0f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -2.204082f, 1.469388f, 0.673469f, 0.061224f},
        {0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -0.0f, 0.0f, 0.0f, 0.0f, -1.530612f, 0.306122f, 0.979592f, 0.244898f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.979592f, -0.489796f, 0.918367f, 0.55102f},
        {0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.0f, -0.0f, 0.0f, 0.0f, -0.55102f, -0.918367f, 0.489796f, 0.979592f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.244898f, -0.979592f, -0.306122f, 1.530612f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.061224f, -0.673469f, -1.469388f, 2.204082f},
        {0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -0.0f, 0.0f, -0.0f, -0.0f, -3.0f, 3.0f}};

    // non-projected coordinated of triangular bezier surface
    const Vec sBezierTriangleST0[] = {{1.0f, 0.0f, 0.0f}, {0.0f, 1.0f, 0.0f}, {0.0f, 0.0f, 1.0f}};
    const Vec sBezierTriangleST1[] = {{1.0f, 0.0f, 0.0f}, {1.0f / 2.0f, 1.0f / 2.0f, 0.0f}, {1.0f / 2.0f, 0.0f, 1.0f / 2.0f},
                                      {0.0f, 1.0f, 0.0f}, {0.0f, 1.0f / 2.0f, 1.0f / 2.0f}, {0.0f, 0.0f, 1.0f}};
    const Vec sBezierTriangleST2[] = {{1.0f, 0.0f, 0.0f},
                                      {2.0f / 3.0f, 1.0f / 3.0f, 0.0f},
                                      {2.0f / 3.0f, 0.0f, 1.0f / 3.0f},
                                      {1.0f / 3.0f, 2.0f / 3.0f, 0.0f},
                                      {1.0f / 3.0f, 1.0f / 3.0f, 1.0f / 3.0f},
                                      {1.0f / 3.0f, 0.0f, 2.0f / 3.0f},
                                      {0.0f, 1.0f, 0.0f},
                                      {0.0f, 2.0f / 3.0f, 1.0f / 3.0f},
                                      {0.0f, 1.0f / 3.0f, 2.0f / 3.0f},
                                      {0.0f, 0.0f, 1.0f}};
    const Vec sBezierTriangleST3[] = {{1.0f, 0.0f, 0.0f},
                                      {3.0f / 4.0f, 1.0f / 4.0f, 0.0f},
                                      {3.0f / 4.0f, 0.0f, 1.0f / 4.0f},
                                      {2.0f / 4.0f, 2.0f / 4.0f, 0.0f},
                                      {2.0f / 4.0f, 1.0f / 4.0f, 1.0f / 4.0f},
                                      {2.0f / 4.0f, 0.0f, 2.0f / 4.0f},
                                      {1.0f / 4.0f, 3.0f / 4.0f, 0.0f},
                                      {1.0f / 4.0f, 2.0f / 4.0f, 1.0f / 4.0f},
                                      {1.0f / 4.0f, 1.0f / 4.0f, 2.0f / 4.0f},
                                      {1.0f / 4.0f, 0.0f, 3.0f / 4.0f},
                                      {0.0f, 1.0f, 0.0f},
                                      {0.0f, 3.0f / 4.0f, 1.0f / 4.0f},
                                      {0.0f, 2.0f / 4.0f, 2.0f / 4.0f},
                                      {0.0f, 1.0f / 4.0f, 3.0f / 4.0f},
                                      {0.0f, 0.0f, 1.0f}};
    const Vec sBezierTriangleST4[] = {{1.0f, 0.0f, 0.0f},
                                      {4.0f / 5.0f, 1.0f / 5.0f, 0.0f},
                                      {4.0f / 5.0f, 0.0f, 1.0f / 5.0f},
                                      {3.0f / 5.0f, 2.0f / 5.0f, 0.0f},
                                      {3.0f / 5.0f, 1.0f / 5.0f, 1.0f / 5.0f},
                                      {3.0f / 5.0f, 0.0f, 2.0f / 5.0f},
                                      {2.0f / 5.0f, 3.0f / 5.0f, 0.0f},
                                      {2.0f / 5.0f, 2.0f / 5.0f, 1.0f / 5.0f},
                                      {2.0f / 5.0f, 1.0f / 5.0f, 2.0f / 5.0f},
                                      {2.0f / 5.0f, 0.0f, 3.0f / 5.0f},
                                      {1.0f / 5.0f, 4.0f / 5.0f, 0.0f},
                                      {1.0f / 5.0f, 3.0f / 5.0f, 1.0f / 5.0f},
                                      {1.0f / 5.0f, 2.0f / 5.0f, 2.0f / 5.0f},
                                      {1.0f / 5.0f, 1.0f / 5.0f, 3.0f / 5.0f},
                                      {1.0f / 5.0f, 0.0f, 4.0f / 5.0f},
                                      {0.0f, 1.0f, 0.0f},
                                      {0.0f, 4.0f / 5.0f, 1.0f / 5.0f},
                                      {0.0f, 3.0f / 5.0f, 2.0f / 5.0f},
                                      {0.0f, 2.0f / 5.0f, 3.0f / 5.0f},
                                      {0.0f, 1.0f / 5.0f, 4.0f / 5.0f},
                                      {0.0f, 0.0f, 1.0f}};
    const Vec sBezierTriangleST5[] = {{1.0f, 0.0f, 0.0f},
                                      {5.0f / 6.0f, 1.0f / 6.0f, 0.0f},
                                      {5.0f / 6.0f, 0.0f, 1.0f / 6.0f},
                                      {4.0f / 6.0f, 2.0f / 6.0f, 0.0f},
                                      {4.0f / 6.0f, 1.0f / 6.0f, 1.0f / 6.0f},
                                      {4.0f / 6.0f, 0.0f, 2.0f / 6.0f},
                                      {3.0f / 6.0f, 3.0f / 6.0f, 0.0f},
                                      {3.0f / 6.0f, 2.0f / 6.0f, 1.0f / 6.0f},
                                      {3.0f / 6.0f, 1.0f / 6.0f, 2.0f / 6.0f},
                                      {3.0f / 6.0f, 0.0f, 3.0f / 6.0f},
                                      {2.0f / 6.0f, 4.0f / 6.0f, 0.0f},
                                      {2.0f / 6.0f, 3.0f / 6.0f, 1.0f / 6.0f},
                                      {2.0f / 6.0f, 2.0f / 6.0f, 2.0f / 6.0f},
                                      {2.0f / 6.0f, 1.0f / 6.0f, 3.0f / 6.0f},
                                      {2.0f / 6.0f, 0.0f, 4.0f / 6.0f},
                                      {1.0f / 6.0f, 5.0f / 6.0f, 0.0f},
                                      {1.0f / 6.0f, 4.0f / 6.0f, 1.0f / 6.0f},
                                      {1.0f / 6.0f, 3.0f / 6.0f, 2.0f / 6.0f},
                                      {1.0f / 6.0f, 2.0f / 6.0f, 3.0f / 6.0f},
                                      {1.0f / 6.0f, 1.0f / 6.0f, 4.0f / 6.0f},
                                      {1.0f / 6.0f, 0.0f, 5.0f / 6.0f},
                                      {0.0f, 1.0f, 0.0f},
                                      {0.0f, 5.0f / 6.0f, 1.0f / 6.0f},
                                      {0.0f, 4.0f / 6.0f, 2.0f / 6.0f},
                                      {0.0f, 3.0f / 6.0f, 3.0f / 6.0f},
                                      {0.0f, 2.0f / 6.0f, 4.0f / 6.0f},
                                      {0.0f, 1.0f / 6.0f, 5.0f / 6.0f},
                                      {0.0f, 0.0f, 1.0f}};
    const Vec sBezierTriangleST6[] = {{1.0f, 0.0f, 0.0f},
                                      {6.0f / 7.0f, 1.0f / 7.0f, 0.0f},
                                      {6.0f / 7.0f, 0.0f, 1.0f / 7.0f},
                                      {5.0f / 7.0f, 2.0f / 7.0f, 0.0f},
                                      {5.0f / 7.0f, 1.0f / 7.0f, 1.0f / 7.0f},
                                      {5.0f / 7.0f, 0.0f, 2.0f / 7.0f},
                                      {4.0f / 7.0f, 3.0f / 7.0f, 0.0f},
                                      {4.0f / 7.0f, 2.0f / 7.0f, 1.0f / 7.0f},
                                      {4.0f / 7.0f, 1.0f / 7.0f, 2.0f / 7.0f},
                                      {4.0f / 7.0f, 0.0f, 3.0f / 7.0f},
                                      {3.0f / 7.0f, 4.0f / 7.0f, 0.0f},
                                      {3.0f / 7.0f, 3.0f / 7.0f, 1.0f / 7.0f},
                                      {3.0f / 7.0f, 2.0f / 7.0f, 2.0f / 7.0f},
                                      {3.0f / 7.0f, 1.0f / 7.0f, 3.0f / 7.0f},
                                      {3.0f / 7.0f, 0.0f, 4.0f / 7.0f},
                                      {2.0f / 7.0f, 5.0f / 7.0f, 0.0f},
                                      {2.0f / 7.0f, 4.0f / 7.0f, 1.0f / 7.0f},
                                      {2.0f / 7.0f, 3.0f / 7.0f, 2.0f / 7.0f},
                                      {2.0f / 7.0f, 2.0f / 7.0f, 3.0f / 7.0f},
                                      {2.0f / 7.0f, 1.0f / 7.0f, 4.0f / 7.0f},
                                      {2.0f / 7.0f, 0.0f, 5.0f / 7.0f},
                                      {1.0f / 7.0f, 6.0f / 7.0f, 0.0f},
                                      {1.0f / 7.0f, 5.0f / 7.0f, 1.0f / 7.0f},
                                      {1.0f / 7.0f, 4.0f / 7.0f, 2.0f / 7.0f},
                                      {1.0f / 7.0f, 3.0f / 7.0f, 3.0f / 7.0f},
                                      {1.0f / 7.0f, 2.0f / 7.0f, 4.0f / 7.0f},
                                      {1.0f / 7.0f, 1.0f / 7.0f, 5.0f / 7.0f},
                                      {1.0f / 7.0f, 0.0f, 6.0f / 7.0f},
                                      {0.0f, 1.0f, 0.0f},
                                      {0.0f, 6.0f / 7.0f, 1.0f / 7.0f},
                                      {0.0f, 5.0f / 7.0f, 2.0f / 7.0f},
                                      {0.0f, 4.0f / 7.0f, 3.0f / 7.0f},
                                      {0.0f, 3.0f / 7.0f, 4.0f / 7.0f},
                                      {0.0f, 2.0f / 7.0f, 5.0f / 7.0f},
                                      {0.0f, 1.0f / 7.0f, 6.0f / 7.0f},
                                      {0.0f, 0.0f, 1.0f}};

    // Triangle Strip Vertex Index Order
    const u16 sBezierTriangleStripOrder0[] = {0, 2, 1};
    const u16 sBezierTriangleStripOrder1[] = {0, 2, 1, 4, 3, 4, 4, 2, 5};
    const u16 sBezierTriangleStripOrder2[] = {0, 2, 1, 4, 3, 7, 6, 7, 7, 4, 8, 5, 9, 5, 5, 4, 2};
    const u16 sBezierTriangleStripOrder3[] = {0, 2, 1, 4, 3, 7, 6, 11, 10, 11, 11, 7, 12, 8, 13, 9, 14, 9, 9, 8, 5, 4, 2, 4, 4, 8, 7};
    const u16 sBezierTriangleStripOrder4[] = {0,  2,  1,  4,  3, 7, 6, 11, 10, 16, 15, 16, 16, 11, 17, 12, 18, 13, 19, 14,
                                              20, 14, 14, 13, 9, 8, 5, 4,  2,  4,  4,  8,  7,  12, 11, 12, 12, 8,  13};
    const u16 sBezierTriangleStripOrder5[] = {0,  2,  1,  4, 3, 7, 6, 11, 10, 16, 15, 22, 21, 22, 22, 16, 23, 17, 24, 18, 25, 19, 26, 20, 27, 20, 20,
                                              19, 14, 13, 9, 8, 5, 4, 2,  4,  4,  8,  7,  12, 11, 17, 16, 17, 17, 12, 18, 13, 19, 13, 13, 12, 8};
    const u16 sBezierTriangleStripOrder6[] = {0,  2,  1,  4,  3,  7,  6,  11, 10, 16, 15, 22, 21, 29, 28, 29, 29, 22, 30, 23, 31, 24, 32,
                                              25, 33, 26, 34, 27, 35, 27, 27, 26, 20, 19, 14, 13, 9,  8,  5,  4,  2,  4,  4,  8,  7,  12,
                                              11, 17, 16, 23, 22, 23, 23, 17, 24, 18, 25, 19, 26, 19, 19, 18, 13, 12, 8,  12, 12, 18, 17};

    // Line Strip Vertex Index Order (for mesh debugging)
    const u16 sBezierLineStripOrder0[] = {1, 0, 2, 1};
    const u16 sBezierLineStripOrder1[] = {1, 0, 2, 1, 4, 2, 5, 4, 3, 1};
    const u16 sBezierLineStripOrder2[] = {1, 0, 2, 1, 4, 2, 5, 4, 8, 5, 9, 8, 7, 4, 3, 7, 6, 3, 1};
    const u16 sBezierLineStripOrder3[] = {1, 0, 2, 1, 4, 2, 5, 4, 8, 5, 9, 8, 13, 9, 14, 13, 12, 8, 7, 12, 11, 7, 6, 11, 10, 6, 3, 7, 4, 3, 1};
    const u16 sBezierLineStripOrder4[] = {1,  0,  2,  1,  4,  2,  5,  4,  8,  5,  9,  8, 13, 9, 14, 13, 19, 14, 20, 19, 18, 13, 12,
                                          18, 17, 12, 11, 17, 16, 11, 10, 16, 15, 10, 6, 11, 7, 12, 8,  7,  4,  3,  7,  6,  3,  1};
    const u16 sBezierLineStripOrder5[] = {1,  0,  2,  1,  4,  2,  5,  4,  8,  5,  9,  8,  13, 9,  14, 13, 19, 14, 20, 19, 26, 20,
                                          27, 26, 25, 19, 18, 25, 24, 18, 17, 24, 23, 17, 16, 23, 22, 16, 15, 22, 21, 15, 10, 16,
                                          11, 17, 12, 18, 13, 12, 8,  7,  12, 11, 7,  6,  11, 10, 6,  3,  7,  4,  3,  1};
    const u16 sBezierLineStripOrder6[] = {1,  0,  2,  1,  4,  2,  5,  4,  8,  5,  9,  8,  13, 9,  14, 13, 19, 14, 20, 19, 26, 20,
                                          27, 26, 34, 27, 35, 34, 33, 26, 25, 33, 32, 25, 24, 32, 31, 24, 23, 31, 30, 23, 22, 30,
                                          29, 22, 21, 29, 28, 21, 15, 22, 16, 23, 17, 24, 18, 25, 19, 18, 13, 12, 18, 17, 12, 11,
                                          17, 16, 11, 10, 16, 15, 10, 6,  11, 7,  12, 8,  7,  4,  3,  7,  6,  3,  1};

    static TrianglePatch sTrianglePatchTableGroup[] = {
        {sBezierTriangleCoef0, sBezierTriangleCoefTangentS0, sBezierTriangleCoefTangentT0, 3, sBezierTriangleStripOrder0,
         ARRAY_SIZE(sBezierTriangleStripOrder0), sBezierLineStripOrder0, ARRAY_SIZE(sBezierLineStripOrder0), sBezierTriangleST0},
        {sBezierTriangleCoef1, sBezierTriangleCoefTangentS1, sBezierTriangleCoefTangentT1, 6, sBezierTriangleStripOrder1,
         ARRAY_SIZE(sBezierTriangleStripOrder1), sBezierLineStripOrder1, ARRAY_SIZE(sBezierLineStripOrder1), sBezierTriangleST1},
        {sBezierTriangleCoef2, sBezierTriangleCoefTangentS2, sBezierTriangleCoefTangentT2, 10, sBezierTriangleStripOrder2,
         ARRAY_SIZE(sBezierTriangleStripOrder2), sBezierLineStripOrder2, ARRAY_SIZE(sBezierLineStripOrder2), sBezierTriangleST2},
        {sBezierTriangleCoef3, sBezierTriangleCoefTangentS3, sBezierTriangleCoefTangentT3, 15, sBezierTriangleStripOrder3,
         ARRAY_SIZE(sBezierTriangleStripOrder3), sBezierLineStripOrder3, ARRAY_SIZE(sBezierLineStripOrder3), sBezierTriangleST3},
        {sBezierTriangleCoef4, sBezierTriangleCoefTangentS4, sBezierTriangleCoefTangentT4, 21, sBezierTriangleStripOrder4,
         ARRAY_SIZE(sBezierTriangleStripOrder4), sBezierLineStripOrder4, ARRAY_SIZE(sBezierLineStripOrder4), sBezierTriangleST4},
        {sBezierTriangleCoef5, sBezierTriangleCoefTangentS5, sBezierTriangleCoefTangentT5, 28, sBezierTriangleStripOrder5,
         ARRAY_SIZE(sBezierTriangleStripOrder5), sBezierLineStripOrder5, ARRAY_SIZE(sBezierLineStripOrder5), sBezierTriangleST5},
        {sBezierTriangleCoef6, sBezierTriangleCoefTangentS6, sBezierTriangleCoefTangentT6, 36, sBezierTriangleStripOrder6,
         ARRAY_SIZE(sBezierTriangleStripOrder6), sBezierLineStripOrder6, ARRAY_SIZE(sBezierLineStripOrder6), sBezierTriangleST6},
    };
}  // namespace

BezierSurface::BezierSurface(s32 divideLevel, u32 a1)
    : mTrianglePatchVertices(nullptr), mTrianglePatchNormals(nullptr), mDivideLevel(divideLevel), _C0(divideLevel), _C4(a1) {
    s32 numPoints = sTrianglePatchTableGroup[mDivideLevel].mNumPoints;
    if ((a1 & 4) != 0) {
        mTrianglePatchVertices = new TVec3f[numPoints];
        if ((a1 & 1) != 0) {
            mTrianglePatchNormals = new TVec3f[numPoints];
        }
    }

    if (mTrianglePatchVertices != nullptr) {
        for (s32 idx = 0; idx < numPoints; idx++) {
            mTrianglePatchVertices[idx].zero();
        }
    }

    if (mTrianglePatchNormals != nullptr) {
        for (s32 idx = 0; idx < numPoints; idx++) {
            mTrianglePatchNormals[idx].zero();
        }
    }

    for (s32 idx = 0; idx < 13; idx++) {
        mCtrlPts[idx].zero();
    }

    for (s32 idx = 0; idx < 3; idx++) {
        mSTPoints[idx].y = 0;
        mSTPoints[idx].x = 0;
    }
}

void BezierSurface::setST(const TVec2f& rST0, const TVec2f& rST1, const TVec2f& rST2) {
    mSTPoints[0].set(rST0);
    mSTPoints[1].set(rST1);
    mSTPoints[2].set(rST2);
}

void BezierSurface::setDivideLevel(s32 divideLevel) {
    mDivideLevel = divideLevel;
}

void BezierSurface::calcBuffer() {
    if (mTrianglePatchVertices != nullptr) {
        calcTrianglePatchVertix(mTrianglePatchVertices);
    }

    if (mTrianglePatchNormals != nullptr) {
        calcTrianglePatchNormal(mTrianglePatchNormals);
    }
}

void BezierSurface::draw() const {
    // what?
    if (_C4 != 0) {
        if (_C4 != 0) {
            drawTrianglePatchPosNormST();
        } else {
            drawTrianglePatchPosNorm();
        }
    } else {
        if (_C4 != 0) {
            drawTrianglePatchPosST();
        } else {
            drawTrianglePatchPos();
        }
    }
}

void BezierSurface::calcTrianglePatchVertix(TVec3f* pVertexPatch) const {
    // FIXME: regswap
    // https://decomp.me/scratch/6TPIf

    s32 i;
    s32 idx;
    s32 numPoints = sTrianglePatchTableGroup[mDivideLevel].mNumPoints;
    TrianglePatchCoefs* coefTable = sTrianglePatchTableGroup[mDivideLevel].mCoefTable;
    for (idx = 0; idx < numPoints; idx++) {
        pVertexPatch[idx].zero();
        for (i = 0; i < 13; i++) {
            f32 scale = coefTable[idx][i];
            if (scale > __fabsf(0.000001f)) {
                MR::vecScaleAdd(&pVertexPatch[idx], &mCtrlPts[i], scale);
            }
        }
    }
}

void BezierSurface::calcTrianglePatchNormal(TVec3f* pNormalPatch) const {
    // FIXME: regswap
    // https://decomp.me/scratch/eGk8K

    s32 i;
    s32 idx;
    s32 numPoints = sTrianglePatchTableGroup[mDivideLevel].mNumPoints;
    TrianglePatchCoefs* tangentSTable = sTrianglePatchTableGroup[mDivideLevel].mCoefTangentSTable;
    TrianglePatchCoefs* tangentTTable = sTrianglePatchTableGroup[mDivideLevel].mCoefTangentTTable;
    for (idx = 0; idx < numPoints; idx++) {
        TVec3f tangentT(0.0f, 0.0f, 0.0f);
        TVec3f tangentS(0.0f, 0.0f, 0.0f);
        for (i = 0; i < 13; i++) {
            f32 scaleS = tangentSTable[idx][i];
            if (__fabsf(scaleS) > 0.000001f) {
                MR::vecScaleAdd(&tangentS, &mCtrlPts[i], scaleS);
            }
            f32 scaleT = tangentTTable[idx][i];
            if (__fabsf(scaleT) > 0.000001f) {
                MR::vecScaleAdd(&tangentT, &mCtrlPts[i], scaleT);
            }
        }
        PSVECCrossProduct(&tangentS, &tangentT, &pNormalPatch[idx]);
        MR::normalizeOrZero(&pNormalPatch[idx]);
    }
}

void BezierSurface::drawTrianglePatchPos() const {
    TVec3f vertexBuffer[36];

    const u16* vertexOrder = sTrianglePatchTableGroup[mDivideLevel].mTriangleStripOrder;
    s32 numPoints = sTrianglePatchTableGroup[mDivideLevel].mNumTriangleStripPoints;

    TVec3f* vertices = mTrianglePatchVertices;
    if (vertices == nullptr) {
        calcTrianglePatchVertix(vertexBuffer);
        vertices = vertexBuffer;
    }

    GXBegin(GX_TRIANGLESTRIP, GX_VTXFMT0, numPoints);
    for (s32 idx = 0; idx < numPoints; idx++) {
        u16 vertexIndex = vertexOrder[idx];
        GXPosition3f32(vertices[vertexIndex].x, vertices[vertexIndex].y, vertices[vertexIndex].z);
    }
}

void BezierSurface::drawTrianglePatchPosNorm() const {
    TVec3f vertexBuffer[36];
    TVec3f normalBuffer[36];

    const u16* vertexOrder = sTrianglePatchTableGroup[mDivideLevel].mTriangleStripOrder;
    s32 numPoints = sTrianglePatchTableGroup[mDivideLevel].mNumTriangleStripPoints;

    TVec3f* vertices = mTrianglePatchVertices;
    if (vertices == nullptr) {
        calcTrianglePatchVertix(vertexBuffer);
        vertices = vertexBuffer;
    }

    TVec3f* normal = mTrianglePatchNormals;
    if (normal == nullptr) {
        calcTrianglePatchNormal(normalBuffer);
        normal = normalBuffer;
    }

    GXBegin(GX_TRIANGLESTRIP, GX_VTXFMT0, numPoints);
    for (s32 idx = 0; idx < numPoints; idx++) {
        u16 vertexIndex = vertexOrder[idx];
        GXPosition3f32(vertices[vertexIndex].x, vertices[vertexIndex].y, vertices[vertexIndex].z);
        GXNormal3f32(normal[vertexIndex].x, normal[vertexIndex].y, normal[vertexIndex].z);
    }
}

void BezierSurface::drawTrianglePatchPosST() const {
    // FIXME: TVec2 operation shenanigans
    // https://decomp.me/scratch/yUck9

    TVec3f vertexBuffer[36];

    const u16* vertexOrder = sTrianglePatchTableGroup[mDivideLevel].mTriangleStripOrder;
    s32 numPoints = sTrianglePatchTableGroup[mDivideLevel].mNumTriangleStripPoints;
    const Vec* triangleST = sTrianglePatchTableGroup[mDivideLevel].mTriangleST;

    TVec3f* vertices = mTrianglePatchVertices;
    if (vertices == nullptr) {
        calcTrianglePatchVertix(vertexBuffer);
        vertices = vertexBuffer;
    }

    const Vec* vec;
    GXBegin(GX_TRIANGLESTRIP, GX_VTXFMT0, numPoints);
    for (s32 idx = 0; idx < numPoints; idx++) {
        u16 vertexIndex = vertexOrder[idx];
        GXPosition3f32(vertices[vertexIndex].x, vertices[vertexIndex].y, vertices[vertexIndex].z);
        vec = &triangleST[vertexIndex];
        TVec2f texCoord(mSTPoints[0] * vec->x + mSTPoints[1] * vec->y + mSTPoints[2] * vec->z);
        GXTexCoord2f32(texCoord.x, texCoord.y);
    }
}

void BezierSurface::drawTrianglePatchPosNormST() const {
    // FIXME: TVec2 operation shenanigans
    // https://decomp.me/scratch/l1R5l

    TVec3f vertexBuffer[36];
    TVec3f normalBuffer[36];

    const u16* vertexOrder = sTrianglePatchTableGroup[mDivideLevel].mTriangleStripOrder;
    s32 numPoints = sTrianglePatchTableGroup[mDivideLevel].mNumTriangleStripPoints;
    const Vec* triangleST = sTrianglePatchTableGroup[mDivideLevel].mTriangleST;

    TVec3f* vertices = mTrianglePatchVertices;
    if (vertices == nullptr) {
        calcTrianglePatchVertix(vertexBuffer);
        vertices = vertexBuffer;
    }

    TVec3f* normal = mTrianglePatchNormals;
    if (normal == nullptr) {
        calcTrianglePatchNormal(normalBuffer);
        normal = normalBuffer;
    }

    GXBegin(GX_TRIANGLESTRIP, GX_VTXFMT0, numPoints);
    for (s32 idx = 0; idx < numPoints; idx++) {
        u16 vertexIndex = vertexOrder[idx];
        GXPosition3f32(vertices[vertexIndex].x, vertices[vertexIndex].y, vertices[vertexIndex].z);
        GXNormal3f32(normal[vertexIndex].x, normal[vertexIndex].y, normal[vertexIndex].z);
        TVec2f texCoord =
            (mSTPoints[0] * triangleST[vertexIndex].x + mSTPoints[1] * triangleST[vertexIndex].y + mSTPoints[2] * triangleST[vertexIndex].z);
        GXTexCoord2f32(texCoord.x, texCoord.y);
    }
}
